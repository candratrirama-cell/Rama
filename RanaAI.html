<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rama AI - Tiktok @maramadhona</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #3b82f6; --bg: #09090b; --card: #18181b; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: white; height: 100dvh; display: flex; flex-direction: column; overflow: hidden; }
        
        header { padding: 15px 20px; border-bottom: 1px solid #27272a; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px); }
        .mode-btn { background: #27272a; border: none; color: #a1a1aa; padding: 8px 16px; border-radius: 10px; font-weight: 600; cursor: pointer; }
        .mode-btn.pro-active { background: linear-gradient(90deg, #3b82f6, #8b5cf6); color: white; }

        #chat-content { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg { padding: 12px 16px; border-radius: 15px; max-width: 85%; line-height: 1.5; font-size: 0.95rem; }
        .user { align-self: flex-end; background: #27272a; border-bottom-right-radius: 2px; }
        .ai { align-self: flex-start; background: #18181b; border: 1px solid #27272a; border-bottom-left-radius: 2px; }

        .footer { padding: 20px; background: linear-gradient(transparent, black); }
        .input-wrap { background: #18181b; border: 1px solid #27272a; border-radius: 25px; display: flex; padding: 5px 5px 5px 20px; align-items: center; }
        input { flex: 1; background: transparent; border: none; color: white; outline: none; height: 40px; font-size: 16px; }
        #send-btn { background: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }

        /* MODAL / POPUP BUY CODE */
        #pro-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 100; padding: 20px; }
        .modal-box { background: #18181b; padding: 25px; border-radius: 20px; border: 1px solid #3b82f6; width: 100%; max-width: 400px; text-align: center; }
        .modal-box h2 { margin-bottom: 15px; }
        .modal-box p { font-size: 0.9rem; color: #a1a1aa; margin-bottom: 20px; }
        .btn-wa { display: block; background: #25d366; color: white; text-decoration: none; padding: 12px; border-radius: 12px; font-weight: 700; margin-bottom: 10px; }
        .btn-input { display: block; background: #3b82f6; color: white; border: none; width: 100%; padding: 12px; border-radius: 12px; font-weight: 700; cursor: pointer; }
    </style>
</head>
<body>

    <header>
        <div style="font-weight: 800; font-size: 1.2rem;">Rama AI</div>
        <button id="pro-toggle" class="mode-btn" onclick="checkProStatus()">Mode Pro ✨</button>
    </header>

    <div id="chat-content">
        <div style="text-align: center; margin-top: 40%; opacity: 0.3;" id="welcome">
            <h3>@maramadhona</h3>
            <p>Silakan tanya apa saja.</p>
        </div>
    </div>

    <div class="footer">
        <div class="input-wrap">
            <input type="text" id="user-in" placeholder="Ketik pesan...">
            <button id="send-btn" onclick="sendChat()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="3"><path d="M12 19V5M5 12l7-7 7 7"/></svg>
            </button>
        </div>
    </div>

    <div id="pro-modal">
        <div class="modal-box">
            <h2>Aktifkan Mode Pro</h2>
            <p>Dapatkan akses tanpa batas dan model AI paling cerdas.</p>
            <button class="btn-input" onclick="inputPasscode()" style="margin-bottom: 10px;">Sudah Punya Kode</button>
            <a href="https://wa.me/+62882008519349?text=hallo%20admin%20Rama%20AI%0ASaya%20ingin%20membuat%20kode%20pro%20AI%20yaitu%20%3A%20(%20isi%20kode%20yang%20diinginkan%20)%20mohon%20siapkan%20nomor%20pembayaran%20ya%20biar%20saya%20bisa%20segera%20membayar" class="btn-wa">Beli Kode (Chat WA Admin)</a>
            <button onclick="document.getElementById('pro-modal').style.display='none'" style="background:none; border:none; color:#555; margin-top:10px;">Nanti Saja</button>
        </div>
    </div>

    <script>
        // DAFTAR PASSWORD PRO BISA DITAMBAH DI SINI
        const LIST_PASSWORD_PRO = ["VIP90AI", "PRO1", "PRO2", "BANGGAKARYA77"];
        
        let isPro = localStorage.getItem('rama_is_pro') === 'true';

        // CEK STATUS SAAT BUKA WEB
        function init() {
            if(isPro) {
                document.getElementById('pro-toggle').classList.add('pro-active');
                document.getElementById('pro-toggle').innerText = "Mode Pro Aktif ✅";
            }
        }

        function checkProStatus() {
            if(isPro) {
                alert("Mode Pro Anda sudah aktif, Pak!");
            } else {
                document.getElementById('pro-modal').style.display = 'flex';
            }
        }

        function inputPasscode() {
            const code = prompt("Masukkan Kode Pro Anda:");
            if (LIST_PASSWORD_PRO.includes(code)) {
                isPro = true;
                localStorage.setItem('rama_is_pro', 'true');
                document.getElementById('pro-modal').style.display = 'none';
                document.getElementById('pro-toggle').classList.add('pro-active');
                document.getElementById('pro-toggle').innerText = "Mode Pro Aktif ✅";
                alert("Selamat! Mode Pro Berhasil Diaktifkan.");
            } else if(code !== null) {
                alert("Kode salah atau sudah kadaluarsa.");
            }
        }

        async function sendChat() {
            const input = document.getElementById('user-in');
            const msg = input.value.trim();
            if(!msg) return;

            document.getElementById('welcome').style.display = 'none';
            addMsg(msg, 'user');
            input.value = '';

            const aiMsg = addMsg("Rama sedang berpikir...", 'ai');

            try {
                const res = await fetch('https://api.nekolabs.web.id/px?url=https://www.perplexity.ai/rest/sse/perplexity_ask', {
                    method: 'POST',
                    headers: { 'content-type': 'application/json' },
                    body: JSON.stringify({
                        params: { model_preference: isPro ? 'pro' : 'turbo' },
                        query_str: msg
                    })
                });
                const d = await res.json();
                const lines = d.result.content.split('\n');
                const raw = lines.map(l => { try { return JSON.parse(l.slice(6)); } catch(e) { return null; } }).find(l => l && l.final_sse_message);
                const ans = JSON.parse(JSON.parse(raw.text).find(s => s.step_type === 'FINAL').content.answer).answer;
                aiMsg.innerText = ans;
            } catch(e) {
                aiMsg.innerText = "Maaf, server sibuk. Coba lagi nanti, Pak.";
            }
        }

        function addMsg(t, s) {
            const cont = document.getElementById('chat-content');
            const d = document.createElement('div');
            d.className = `msg ${s}`;
            d.innerText = t;
            cont.appendChild(d);
            cont.scrollTop = cont.scrollHeight;
            return d;
        }

        init();
    </script>
</body>
</html>
